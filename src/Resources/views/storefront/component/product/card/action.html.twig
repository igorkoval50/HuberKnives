{% sw_extends '@Storefront/storefront/component/product/card/action.html.twig' %}
{#{% block component_product_box_action_inner %}#}
{#    {% set id = product.id %}#}

{#    {% if shopware.config.core.listing.allowBuyInListing %}#}
{#        <div class="product-action">#}
{#            {% set isAvailable = not product.isCloseout or (product.availableStock >= product.minPurchase) %}#}

{#            {% if isAvailable and not product.isGrouped and product.childCount <= 0 and product.calculatedPrices.count <= 1 %}#}
{#                {% block component_product_box_action_buy %}#}
{#                    #}{# @var product \Shopware\Core\Content\Product\SalesChannel\SalesChannelProductEntity #}
{#                    <form action="{{ path('frontend.checkout.line-item.add') }}"#}
{#                          method="post"#}
{#                          class="buy-widget"#}
{#                          data-add-to-cart="true">#}

{#                        {% block component_product_box_action_buy_csrf %}#}
{#                            {{ sw_csrf('frontend.checkout.line-item.add') }}#}
{#                        {% endblock %}#}

{#                        {% block component_product_box_action_form %}#}

{#                            {% block component_product_box_action_buy_redirect_input %}#}
{#                                #}{# fallback redirect back to detail page is deactivated via js #}
{#                                <input type="hidden"#}
{#                                       name="redirectTo"#}
{#                                       value="frontend.detail.page">#}

{#                                <input type="hidden"#}
{#                                       name="redirectParameters"#}
{#                                       data-redirect-parameters="true"#}
{#                                       value='{"productId": "{{ product.id }}"}'>#}
{#                            {% endblock %}#}

{#                            {% block page_product_detail_buy_product_buy_info %}#}
{#                                <input type="hidden"#}
{#                                       name="lineItems[{{ id }}][id]"#}
{#                                       value="{{ id }}">#}
{#                                <input type="hidden"#}
{#                                       name="lineItems[{{ id }}][referencedId]"#}
{#                                       value="{{ id }}">#}
{#                                <input type="hidden"#}
{#                                       name="lineItems[{{ id }}][type]"#}
{#                                       value="product">#}
{#                                <input type="hidden"#}
{#                                       name="lineItems[{{ id }}][stackable]"#}
{#                                       value="1">#}
{#                                <input type="hidden"#}
{#                                       name="lineItems[{{ id }}][removable]"#}
{#                                       value="1">#}
{#                                <input type="hidden"#}
{#                                       name="lineItems[{{ id }}][quantity]"#}
{#                                       value="{{ product.minPurchase }}">#}
{#                            {% endblock %}#}

{#                            {% block page_product_detail_product_buy_meta %}#}
{#                                <input type="hidden"#}
{#                                       name="product-name"#}
{#                                       value="{{ product.translated.name }}">#}
{#                            {% endblock %}#}
{#                        {% endblock %}#}
{#                    </form>#}
{#                {% endblock %}#}
{#            {% else %}#}
{#                #}
{#            {% endif %}#}
{#        </div>#}
{#    {% endif %}#}

{#    {% block component_product_box_action_meta %}#}
{#        <input type="hidden"#}
{#               name="product-name"#}
{#               value="{{ product.translated.name }}">#}

{#        <input type="hidden"#}
{#               name="product-id"#}
{#               value="{{ id }}">#}
{#    {% endblock %}#}
{#{% endblock %}#}


{% block component_product_box_action_detail %}
  <div class="action-button-detail">
      <a href="{{ seoUrl('frontend.detail.page', {'productId': id}) }}"
         class="btn btn-block btn-light btn-detail-custom"
         title="{{ "listing.boxProductDetails"|trans|striptags }}">
          {{ "listing.boxProductDetails"|trans|sw_sanitize }}
      </a>
  </div>
{% endblock %}

  {% block page_product_detail_product_buy_button %}
      <div class="btn-bug-active">
          <button class="btn btn-block btn-buy btn-bug"
                  title="{{ "listing.boxAddProduct"|trans|striptags }}">
              <span class="icon icon-bag">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                              <path fill="#758CA3" fill-rule="evenodd"
                                    d="M5.89201868,3.00002161 C6.44430343,3.00002161 6.89201868,3.44773686 6.89201868,4.00002161 C6.89201868,4.55230636 6.44430343,5.00002161 5.89201868,5.00002161 L3.78952369,5.00002161 C3.25766386,5.00002161 2.81885979,5.41633807 2.79090586,5.94746278 L2.00143217,20.9474628 C1.97240473,21.4989842 2.39596977,21.969612 3.00005,22.0000216 L20.8102851,22.0000216 C21.3625698,22.0000216 21.8102851,21.5523064 21.8089029,20.9474628 L21.019429,5.94744123 C20.9914751,5.4163165 20.552671,5 20.0208111,5 L17.8920187,5 C17.3397339,5 16.8920187,4.55228475 16.8920187,4 C16.8920187,3.44771525 17.3397339,3 17.8920187,3 L20.0208111,3 C21.6163907,3 22.9328029,4.24894949 23.0166646,5.84232368 L23.8061386,20.8423453 C23.8095937,20.9211471 23.8095937,20.9211471 23.8102851,21.0000216 C23.8102851,22.6568759 22.4671393,24.0000216 20.8102851,24.0000216 L3.00005,24.0000216 C2.92117541,23.9993303 2.92117541,23.9993303 2.8423735,23.9958751 C1.18780931,23.9087928 -0.0828858128,22.4969093 0.00419651318,20.8423451 L0.793670197,5.84234511 C0.877531993,4.24897099 2.1939442,3.00002161 3.78952369,3.00002161 L5.89201868,3.00002161 Z M9.89201868,5 C9.89201868,5.55228475 9.44430343,6 8.89201868,6 C8.33973393,6 7.89201868,5.55228475 7.89201868,5 L7.89201868,3 C7.89201868,1.34314575 9.23516443,1.22124533e-15 10.8920187,8.8817842e-16 L12.8920187,9.99200722e-16 C14.5488729,4.99600361e-16 15.8920187,1.34314575 15.8920187,3 L15.8920187,5 C15.8920187,5.55228475 15.4443034,6 14.8920187,6 C14.3397339,6 13.8920187,5.55228475 13.8920187,5 L13.8920187,3 C13.8920187,2.44771525 13.4443034,2 12.8920187,2 L10.8920187,2 C10.3397339,2 9.89201868,2.44771525 9.89201868,3 L9.89201868,5 Z"></path>
                            </svg></span>
          </button>
      </div>
  {% endblock %}
